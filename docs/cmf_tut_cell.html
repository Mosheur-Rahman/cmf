<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cmf: Cells</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cmf-logo-2018.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
  <div id="projectnumber">1.6.0</div>
   <div id="projectbrief">catchment modelling framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cmf_tut_cell.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Cells </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cells are the units of the horizontal discretization. Cells are defined by the position of their center in space and their area. Each cell references its soil layers, a surfacewater storage, a snow storage, a water storage for the vegetation canopy. Vegetational parameters are also defined for cells, and used by models for evapotranspiration. Upon creation, the cell consists of a boundary condition for evaporation and transpiration, and a flux node for the surface water (not a water storage). The geometric shape of a cell is not saved and not relevant for cmf. For models with lateral fluxes, saved information on the topology (spatial relation) of the cells can be helpful. The API documentation can be found here: <a class="el" href="classcmf_1_1upslope_1_1_cell.html">Cell</a>.</p>
<h2>Creation</h2>
<p>Cells are created for a project with the following command. The position in space is given with the x,y,z coordinates (cartesian coordinates in m, eg. UTM or from a user defined origin) and the area is given in m². For 1D and lumped models, an area of 1000m² is helpful to use any volume in m³ as mm.</p>
<div class="fragment"><div class="line">c = p.NewCell(x=0.0,y=0.0,z=0.0,area=1000.0)</div></div><!-- fragment --><p>The cell <code>c</code> has a standard vegetation (short grass) which can be changed with <code>c.vegetation</code> and the boundary conditions noted above.</p>
<h3>Adding soil layers</h3>
<div class="fragment"><div class="line">c.add_layer(d=0.1,r_curve=cmf.VanGenuchtenMualem())</div></div><!-- fragment --><p>Adds a new soil layer up to the depth of 10cm below ground (d in m) with a default paramterized van Genuchten - Mualem retention curve. The usage of retention curves in cmf is discussed <a class="el" href="cmf_tut_retentioncurve.html">here</a>, but it is recommended to read about that later in the <a class="el" href="cmf_tut1d.html">CMF-1D</a>tutorial"</p>
<h3>Adding a surface water storage</h3>
<div class="fragment"><div class="line">c.surfacewater_as_storage()</div></div><!-- fragment --><p>converts the flux node surfacewater into an openwater storage. This is '''strongly recommended''' for all model setups, except for very conceptual models. If you are not sure, create it. Routing is much simpler to understand, if a surfacewater storage is present, '''even if you do not expect to have infiltration or saturation excess'''. And cmf is much better tested for models with surfacewater storage.</p>
<h2>Topology</h2>
<p>Lateral flux connections between water storages and boundary conditions, like soil layers, surface water, and outlets are usually defined by just creating them (see eg. <a class="el" href="cmf_tut_first_model.html">here</a>). Most of the flux connections require a notion of the distance between the water storages, and the crosssection of the flux. Calculating these values can be cumbersome, if many lateral connections need to be created. To facilitate this task, you can save the topologic relation of cells. There are tools available (see CmfFluxCreationTools), to create many connections based on the topological information.</p>
<p>Cell topology defines neighborhood relation between 2 cells by saving the length of the shared boundary of the cells.</p>
<div class="fragment"><div class="line">c1.topology.AddNeighbor(c2,5.0)</div></div><!-- fragment --><p>defines c1 and c2 as neighbors with a shared boundary of 5m. Topology is used in [[wiki:CmfTutDarcianLateralFlow]|and [wiki:CmfTutSurfaceRunoff]].</p>
<h1>Rivers and reaches</h1>
<p>Rivers can cross cells or run along cells, depending your setup, or if you only need a 1D model of flow in rivers, they can be created without cells, see [[wiki:CmfTutChannel].|Rivers need to be discretized to reaches according to your needs of numerical precision, the heterogenity of the channel form and to match the size of the cells. The reaches are implemented in cmf by the <a class="el" href="classcmf_1_1river_1_1_reach.html">Reach</a>] water storage.</p>
<h2>Crossectional geometry</h2>
<p>If you create a reach for the project, you must give the crossectional geometry of the river. The different basic geometries are: - <a class="el" href="classcmf_1_1river_1_1_triangular_reach.html">TriangularReach</a> - T, a river with a triangular crosssection - <a class="el" href="classcmf_1_1river_1_1_s_w_a_t_reach_type.html">SWATReachType</a> - S, a river with a trapezoidal crossection, with a flat flood plain, as in the model SWAT - <a class="el" href="classcmf_1_1river_1_1_rectangular_reach.html">RectangularReach</a> - R, a rectangular crosssection - <a class="el" href="classcmf_1_1river_1_1_pipe_reach.html">PipeReach</a> - P, a circular pipe</p>
<p>More crossection types can be implemented on demand.</p>
<h2>Creating a river</h2>
<h3>Creating the reaches</h3>
<p>As a general type, <a class="el" href="classcmf_1_1river_1_1_channel.html">Channel</a> is used, denoting the crosssection by the shortcuts listed above:</p>
<div class="fragment"><div class="line">r1=p.NewReach(x=0,y=0,z=1.0,length=100,Type=<span class="stringliteral">&#39;S&#39;</span>,width=0.5,depth=0.1,diffusive=<span class="keyword">False</span>)</div><div class="line">r2=p.NewReach(x=100,y=0,z=0,length=100,Type=<span class="stringliteral">&#39;S&#39;</span>,width=0.5,depth=0.1,diffusive=<span class="keyword">False</span>)</div></div><!-- fragment --><p>This command creates a new reach with a trapezoidal crossection, a bank width of 50cm, a depth of 10 cm using (per default) a kinematic wave approach. The center of the reach is located at x,y,z.</p>
<h3>Connecting the reaches</h3>
<p>The two reaches can be connected with any connection suitable for open water storages. However, in most cases a kinematic or diffusive wave approach, using Manning's roughness as the friction term will be used for modelling channeled flow (see CmfTutChannel), hence the two reaches can be connected by definining r2 as the downstream reach of r1:</p>
<div class="fragment"><div class="line">r1.set_downstream(r2)</div></div><!-- fragment --><p>r2 should be connected to the area outlet:</p>
<div class="fragment"><div class="line">outlet = p.NewOutlet(<span class="stringliteral">&#39;outlet&#39;</span>,x=200,y=0,z=-1.0)</div><div class="line">r2.set_outlet(outlet)</div></div><!-- fragment --><p>CmfTutChannel will show a full running example. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<hr class="footer"/><address class="footer"><small>
<div>&copy 2008-2017 by 
<a class="el" href="http://www.uni-giessen.de/hydro/kraft"> Philipp Kraft</a> and
<a class="el" href="http://www.uni-giessen.de/hydro"> 
Institute of Landscape Ecology and Resources Management,University of Gie&szlig;en</a>
</h3></td>
<td>Generated: Sun Feb 9 2020 15:17:02</td>
</tr></table>
</small></address>
</body>
</html>
